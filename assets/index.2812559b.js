import{s as T}from"./setWindowSize.73fff501.js";import{L as k,F as C,S as M,E as H,a as P,b as F,W as A,C as W,M as q,c as j,P as O}from"./three.module.44b99a5f.js";class R extends k{constructor(e){super(e)}load(e,t,s,n){const r=this,a=new C(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,function(l){let h;try{h=JSON.parse(l)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),h=JSON.parse(l.substring(65,l.length-2))}const d=r.parse(h);t&&t(d)},s,n)}parse(e){return new E(e)}}class E{constructor(e){this.type="Font",this.data=e}generateShapes(e,t=100){const s=[],n=_(e,t,this.data);for(let r=0,a=n.length;r<a;r++)Array.prototype.push.apply(s,n[r].toShapes());return s}}function _(o,e,t){const s=Array.from(o),n=e/t.resolution,r=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n,a=[];let l=0,h=0;for(let d=0;d<s.length;d++){const p=s[d];if(p===`
`)l=0,h-=r;else{const u=G(p,n,l,h,t);l+=u.offsetX,a.push(u.path)}}return a}function G(o,e,t,s,n){const r=n.glyphs[o]||n.glyphs["?"];if(!r){console.error('THREE.Font: character "'+o+'" does not exists in font family '+n.familyName+".");return}const a=new M;let l,h,d,p,u,w,y,m;if(r.o){const c=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let i=0,f=c.length;i<f;)switch(c[i++]){case"m":l=c[i++]*e+t,h=c[i++]*e+s,a.moveTo(l,h);break;case"l":l=c[i++]*e+t,h=c[i++]*e+s,a.lineTo(l,h);break;case"q":d=c[i++]*e+t,p=c[i++]*e+s,u=c[i++]*e+t,w=c[i++]*e+s,a.quadraticCurveTo(u,w,d,p);break;case"b":d=c[i++]*e+t,p=c[i++]*e+s,u=c[i++]*e+t,w=c[i++]*e+s,y=c[i++]*e+t,m=c[i++]*e+s,a.bezierCurveTo(u,w,y,m,d,p);break}}return{offsetX:r.ha*e,path:a}}E.prototype.isFont=!0;class N extends H{constructor(e,t={}){const s=t.font;if(s===void 0)super();else{const n=s.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(n,t)}this.type="TextGeometry"}}const b=(o,e,t)=>(1-t)*o+t*e,L=[{text:"Code Shed"}];let v=0;const B=document.querySelectorAll("#js-link-list .link-list__link"),I=o=>{const e=o.currentTarget;if(e instanceof HTMLElement){const t=e.dataset.index;v=Number(t)}},D=()=>{v=0};B.forEach(o=>{o instanceof HTMLElement&&L.push({text:o.textContent||""}),o.addEventListener("mouseenter",I),o.addEventListener("mouseleave",D)});const J=()=>{const o=new P;o.fog=new F(0,50,150);const e=new A({canvas:document.querySelector("#bgCanvas")});e.setClearColor(new W(0)),e.setSize(window.innerWidth,window.innerHeight),e.setPixelRatio(window.devicePixelRatio);let t=[];new R().load("/fonts/BIZUDPGothic_Bold.json",d=>{t=L.map(p=>{const u=new N(p.text,{font:d,size:.5,height:.3});u.center();const w=new q({transparent:!0,opacity:1}),y=new j(u,w);return o.add(y),{target:y,material:w}})});const n=new O(45,window.innerWidth/window.innerHeight,.1,500);n.position.set(0,0,25),n.lookAt(o.position);let r=0,a=0;window.addEventListener("mousemove",d=>{r=d.clientX/window.innerWidth-.5,a=d.clientY/window.innerHeight-.5}),window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),n.lookAt(0,0,0),e.setSize(window.innerWidth,window.innerHeight)});let l=0;const h=d=>{const p=d||0,u=(p-l)/1e3;l=p,t.length>0&&t.forEach((m,c)=>{const{target:i,material:f}=m,x=f.opacity,S=i.position.z;if(c===v){let g=b(x,1,u*2),z=b(S,0,u*2);g>.95&&(g=1),f.opacity=g,i.position.z=z}else{let g=b(x,0,u*2);g<.01&&(g=0),f.opacity=g}f.opacity===0&&(i.position.z=-3),i.rotation.z=Math.sin(p/1e3)*.1});const w={x:r*10,y:a*10*-1};n.position.x+=(w.x-n.position.x)*.03,n.position.y+=(w.y-n.position.y)*.03;const y={x:n.position.x/3,y:n.position.y/3,z:0};n.lookAt(y.x,y.y,y.z),e.render(o,n),requestAnimationFrame(h)};h()},U=()=>{T(),J()},Z=()=>{const o=document.body;o.dataset.loaded="true"};window.addEventListener("DOMContentLoaded",U);window.addEventListener("load",Z);
